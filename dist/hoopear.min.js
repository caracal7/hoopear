(function(e,t,n){"use strict";var r,i,s,o,u,a=t.body,f="",l=function(e){var n;if(typeof e==="object"){if(typeof e.tag!=="undefined")n=t.createElement(e.tag);if(typeof e.klass!=="undefined")n.className=e.klass;if(typeof e.content!=="undefined")n.innerHTML=e.content}else n=t.createElement(e);return n},c=function(e){return t.querySelector(e)},h=function(e,t){e.appendChild(t)},p=function(e,t){e.insertBefore(t,e.firstChild)},d=function(e){e.parentNode.removeChild(e)},v=function(e,t){if(!g(e,t))e.className+=" "+t},m=function(e,t){e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")},g=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},y=function(e,n,r){if(t.addEventListener){e.addEventListener(n,r,false)}else if(t.attachEvent){e.attachEvent("on"+n,r)}},b=function(e,n,r){if(t.removeEventListener){e.removeEventListener(n,r,false)}else if(t.detachEvent){e.detachEvent("on"+n,r)}},w=function(){if(f==""){var e=l("hoopear"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},r,i=false;for(r in t)if(e.style[r]!==n)i=t[r];f=i;return i}else return f},E=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])if(arguments[e].hasOwnProperty(t))arguments[0][t]=arguments[e][t];return arguments[0]},S=function(e){if(e&&e.scrollTop!==null){if(w())v(e,"in");else T(e,true)}else S(e)},x=function(e,t){if(w()){m(e,"in");y(e,w(),t)}else T(e,false)},T=function(e,t){e.style.right=0;var n=!t?.9:.1,r=setInterval(function(){if(n<=0||n>=1){clearInterval(r);if(!t)d(e)}e.style.opacity=n;e.style.filter="alpha(opacity="+n*100+")";n=!t?n-.1:n+n*.3},30)};s=function(){var e,t,n,r,i,s,o,u,f,c,p,w,T;t={width:"400px",message:"",title:false,cross:true,fields:false,buttons:["close"],wrapper:{overlay:{tag:"div",klass:"hoopear-overlay"},container:{tag:"div",klass:"hoopear-dialog"},header:{tag:"div",klass:"hoopear-dialog-header"},title:{tag:"h3",klass:"hoopear-dialog-title"},body:{tag:"div",klass:"hoopear-dialog-body"},form:{tag:"form",klass:"hoopear-dialog-form"},footer:{tag:"div",klass:"hoopear-dialog-footer"},cross:{tag:"a",klass:"hoopear-dialog-cross",content:"&times;"},button:{tag:"a",klass:"hoopear-dialog-button"}}};p=function(){c=l(e.wrapper.overlay);h(a,c);return c};w=function(a){e=E({},t,a);c=c||p();m(c,"hide");c.className=e.wrapper.overlay.klass+" in";y(c,"click",T);n=l(e.wrapper.container);v(n,e.type);n.style.width=e.width;y(n,"click",function(e){e.stopPropagation()});if(e.title!==false){e.wrapper.title.content=e.title;s=l(e.wrapper.title);r=l(e.wrapper.header);if(e.cross===true){o=l(e.wrapper.cross);h(r,o);y(o,"click",T)}h(r,s);h(n,r)}e.wrapper.body.content=e.message;u=l(e.wrapper.body);if(e.fields!==false){i=l(e.wrapper.form);i.innerHTML=e.fields;h(u,i)}h(n,u);if(e.buttons!==false){f=l(e.wrapper.footer);var d=e.buttons,g,b,w,x;for(g in d){w=e.wrapper.button;b=d[g];w.content=typeof b=="function"?g:d[g];x=l(w);y(x,"click",T);if(typeof b=="function")y(x,"click",b);h(f,x)}h(n,f)}h(c,n);S(n)};T=function(t){b(this,"click",T);b(c,"click",T);x(n,function(e){if(e.propertyName=="opacity"){m(c,"in");v(c,"hide");d(n)}});var r=t.target||t.srcElement;if(g(r,e.wrapper.button.klass))if(typeof e.callback=="function")if(e.fields!==false){var s={},o=i.elements,u;for(u=0;u<o.length;u++)s[o[u].name]=o[u].value;e.callback(r.innerHTML,s)}else e.callback(r.innerHTML);else return false};return function(e){return w(e)}}();o=function(){var e,t,n,r,i,s,o;e={timeout:4e3,message:"",type:"",container:false,prepend:false,maxItems:3,wrapper:{container:{tag:"div",klass:"hoopear-notes"},items:{tag:"div",klass:"hoopear-note"}}};i=function(){t=l(e.wrapper.container);h(a,t);return t};s=function(s){var u=E({},e,s),a,f,d;u.type=typeof u.type==="string"&&u.type!==""?" "+u.type:"";r=l(u.wrapper.items);r.className=u.wrapper.items.klass+u.type;r.innerHTML=typeof s==="string"?s:u.message;if(u.container===false){t=t||i();a=t}else{n=c(u.container);a=n}f=a.getElementsByClassName(u.wrapper.items.klass).length;if(u.prepend){d=a.lastChild;p(a,r)}else{d=a.firstChild;h(a,r)}if(f>=u.maxItems)o(d,-1);S(r);o(r,u.timeout)};o=function(e,t){var n=function(e){e=this||e;b(e,"click",n);clearTimeout(r);x(e,function(t){if(t.propertyName=="opacity")d(e)})};if(t==-1){n(e);return}y(e,"click",n);t=t&&!isNaN(t)?+t:config.timeout;if(t===0)return;var r=setTimeout(function(){n(e)},t)};return function(e){s(e)}}();u=function(){var e,t,n,r,i,s,o;i={closeable:false,container:false,parentClass:"hoopear-block-parent",message:"Loading..",overlay:{tag:"div",klass:"hoopear-block"},inner:{tag:"div",klass:"inner"}};s=function(s){r=E({},i,s);if(c("."+r.overlay.klass))return false;r.inner.content=r.message;e=l(r.overlay);t=l(r.inner);h(e,t);if(r.container!==false){n=c(r.container);v(n,r.parentClass);v(e,"inline")}else{n=a}h(n,e);S(e);if(r.closeable)y(e,"click",o)};o=function(){if(e){n=e.parentNode;x(e,function(t){if(t.propertyName=="opacity"){d(e);m(n,r.parentClass)}})}};return{create:function(e){return s(e)},remove:function(){return o()},defaults:function(e){i=E({},i,e);return this}}}();i={dialog:s,note:o,block:u.create,unblock:u.remove};e.hoopear=i})(window,document)